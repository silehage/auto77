(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"29d2":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("q-header",{staticClass:"text-primary bg-white box-shadow"},[r("q-toolbar",[r("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_back"},on:{click:t.handleBackButton}}),r("q-toolbar-title",{staticClass:"text-weight-bold brand"},[t._v("Form Pemesanan")])],1)],1),t.carts&&t.carts.items.length?r("div",{ref:"top",staticClass:"q-pb-xl",attrs:{id:"checkout"}},[r("shipping-address",{attrs:{isModalAddress:t.isAvailableOldAddress},on:{closeModal:function(e){t.isAvailableOldAddress=!1}}}),r("div",{},[r("fieldset",{staticClass:"q-mt-lg"},[r("legend",{staticClass:"q-pa-sm"},[t._v("Ringkasan Order")]),t.formOrder.items.length?r("div",{staticClass:"q-mb-md"},[r("q-separator"),r("q-list",{attrs:{separator:""}},[r("q-item",{staticClass:"bg-grey-1",attrs:{dense:""}},[r("q-item-section",[r("q-item-label",[t._v("Produk")])],1),r("q-item-section",{attrs:{side:""}},[r("q-item-label",[t._v("Subtotal")])],1)],1),t._l(t.formOrder.items,(function(e){return r("q-item",{key:e.id},[r("q-item-section",{attrs:{avatar:"",top:""}},[r("q-img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.image_url}})],1),r("q-item-section",[r("div",{staticClass:"col"},[r("div",{staticClass:"text-weight-medium"},[t._v(t._s(e.name))]),r("div",{staticClass:"text-caption text-grey-7"},[t._v(t._s(e.note))]),r("div",{staticClass:"text-grey-7"},[t._v(t._s(e.quantity+"X "+t.moneyIDR(e.price)))])])]),r("q-item-section",{attrs:{side:""}},[r("q-item-label",[t._v(t._s(t.moneyIDR(e.price*e.quantity)))])],1)],1)}))],2)],1):t._e(),r("q-separator"),r("div",{staticClass:"flex justify-end q-py-sm"},[r("table",{staticClass:"table dense"},[r("tr",[r("td",{attrs:{align:"right"}},[t._v("Jumlah")]),r("td",{attrs:{align:"right"}},[t._v(":")]),r("td",{attrs:{align:"right"}},[t._v(t._s(t.moneyIDR(t.formOrder.subtotal)))])]),r("tr",[r("td",{attrs:{align:"right"}},[t._v("Ongkos Kirim")]),r("td",{attrs:{align:"right"}},[t._v(":")]),r("td",{attrs:{align:"right"}},[t._v(t._s(t.formOrder.shipping_cost?t.moneyIDR(t.formOrder.shipping_cost):0))])]),r("tr",{staticStyle:{"border-bottom":"1px solid"}},[r("td",{attrs:{align:"right"}},[t._v("Total")]),r("td",{attrs:{align:"right"}},[t._v(":")]),r("td",{attrs:{align:"right"}},[t._v(t._s(t.moneyIDR(t.formOrder.total)))])])])]),t.formOrder.payment_fee?r("div",{staticClass:"flex justify-end q-mt-sm bg-grey-1 q-py-sm"},[r("table",{staticClass:"table dense"},[t.formOrder.payment_fee?r("tr",[r("td",{staticClass:"text-xs",attrs:{align:"right"}},[t._v("Payment Fee [ "+t._s(t.formOrder.payment_name)+" ]")]),r("td",{attrs:{align:"right"}},[t._v(":")]),r("td",{attrs:{align:"right"}},[t._v(t._s(t.moneyIDR(t.formOrder.payment_fee)))])]):t._e(),r("tr",[r("th",{attrs:{align:"right"}},[t._v("Total Tagihan")]),r("td",{attrs:{align:"right"}},[t._v(":")]),r("th",{attrs:{align:"right"}},[t._v(t._s(t.moneyIDR(t.formOrder.total+t.formOrder.payment_fee)))])])])]):t._e()],1)])],1):t._e(),r("q-inner-loading",{attrs:{showing:t.loading}},[r("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1),r("q-footer",{staticClass:"bg-white q-pa-md"},[r("q-btn",{staticClass:"full-width q-mt-sm",attrs:{color:"green-6","no-caps":""},on:{click:t.checkout}},[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 50 50",width:"20px",height:"20px"}},[r("g",{attrs:{id:"surface1441897"}},[r("path",{staticStyle:{stroke:"none","fill-rule":"nonzero",fill:"currentColor","fill-opacity":"1"},attrs:{d:"M 25 2 C 12.316406 2 2 12.316406 2 25 C 2 28.960938 3.023438 32.855469 4.964844 36.289062 L 2.035156 46.730469 C 1.941406 47.074219 2.035156 47.441406 2.28125 47.695312 C 2.472656 47.894531 2.734375 48 3 48 C 3.078125 48 3.160156 47.988281 3.238281 47.972656 L 14.136719 45.273438 C 17.464844 47.058594 21.210938 48 25 48 C 37.683594 48 48 37.683594 48 25 C 48 12.316406 37.683594 2 25 2 Z M 36.570312 33.117188 C 36.078125 34.476562 33.71875 35.722656 32.585938 35.886719 C 31.566406 36.035156 30.277344 36.101562 28.863281 35.65625 C 28.007812 35.386719 26.90625 35.027344 25.496094 34.429688 C 19.574219 31.902344 15.707031 26.011719 15.410156 25.625 C 15.117188 25.234375 13 22.464844 13 19.59375 C 13 16.726562 14.523438 15.3125 15.066406 14.730469 C 15.609375 14.144531 16.246094 14 16.640625 14 C 17.035156 14 17.429688 14.003906 17.773438 14.019531 C 18.136719 14.039062 18.625 13.882812 19.101562 15.023438 C 19.59375 16.191406 20.777344 19.058594 20.921875 19.351562 C 21.070312 19.644531 21.167969 19.984375 20.972656 20.375 C 20.777344 20.761719 20.679688 21.007812 20.382812 21.347656 C 20.085938 21.6875 19.761719 22.105469 19.496094 22.367188 C 19.199219 22.660156 18.894531 22.976562 19.238281 23.558594 C 19.582031 24.144531 20.765625 26.050781 22.523438 27.597656 C 24.777344 29.585938 26.679688 30.199219 27.269531 30.492188 C 27.859375 30.785156 28.203125 30.734375 28.550781 30.347656 C 28.894531 29.957031 30.023438 28.644531 30.417969 28.058594 C 30.8125 27.476562 31.203125 27.574219 31.746094 27.769531 C 32.289062 27.960938 35.191406 29.371094 35.78125 29.664062 C 36.371094 29.957031 36.765625 30.101562 36.914062 30.34375 C 37.0625 30.585938 37.0625 31.753906 36.570312 33.117188 Z M 36.570312 33.117188 "}})])]),r("span",{staticClass:"q-ml-sm"},[t._v("\n        "+t._s(t.isOk?"Proses Pesanan":"Lengkapi data untuk lanjut")+"\n      ")])])],1)],1)},i=[],a=(r("ac1f"),r("5319"),r("2ca0"),r("1276"),r("a15b"),r("caad"),r("b64b"),r("159b"),r("99af"),r("b0c0"),r("54df")),n={components:{ShippingAddress:a["a"]},name:"CheckoutDirectWithShipping",data:function(){return{isAvailableOldAddress:!1,formLoading:!1}},computed:{carts:function(){return this.$store.getters["cart/getCarts"]},formOrder:function(){return this.$store.getters["order/getFormOrder"]},errors:function(){return this.$store.state.errors},shop:function(){return this.$store.state.shop},config:function(){return this.$store.state.config},loading:function(){return this.$store.state.loading},session_id:function(){return this.$store.state.session_id},coupon_discount:function(){return this.$store.state.coupon.coupon_discount},isOk:function(){return!!(this.formOrder.customer_name&&this.formOrder.customer_phone&&this.formOrder.shipping_courier_name&&this.formOrder.customer_address)}},mounted:function(){this.carts.items.length||this.$router.back(),this.checkDataUser(),this.collectOrder()},methods:{collectOrder:function(){this.$store.commit("order/COLLECT_ORDER",this.carts)},checkDataUser:function(){localStorage.getItem("user_data")&&(this.isAvailableOldAddress=!0)},handleBackButton:function(){this.$router.push({name:"Cart"})},formatPhoneNumber:function(t){var e=t.replace(/\D/g,"");return e.startsWith("0")&&(e="62"+e.substr(1)),e},formatAddressCod:function(t){var e=t.split("<br>");return e.join("\n")},validateData:function(){this.$store.commit("CLEAR_ERRORS");var t=["customer_name","customer_phone","customer_address"],e=["shipping_destination","shipping_courier_name","shipping_courier_service"];for(var r in this.formOrder)(t.includes(r)||e.includes(r))&&(this.formOrder[r]&&""!=this.formOrder[r]||this.$store.commit("PUSH_ERRORS",{key:r,value:!0}));if(Object.keys(this.errors).length>0){for(var s in this.errors){if(console.log(s),"shipping_destination"==s)return this.jumpTo("shipping"),this.$q.notify({type:"negative",message:"Tujuan pengiriman belum diisi"}),!1;if("shipping_courier_service"==s)return this.jumpTo("courier"),this.$q.notify({type:"negative",message:"Kurir belum dipilih"}),!1;if(t.includes(s))return this.jumpTo("customer"),this.$q.notify({type:"negative",message:"Data penerima belum lengkap"}),!1}return!1}return!0},checkout:function(){var t=this;if(this.validateData()&&this.isOk){var e="https://api.whatsapp.com";this.$q.platform.is.desktop&&(e="https://web.whatsapp.com");var r=this.formatPhoneNumber(this.shop.phone),s="Halo kak, saya mau order:\n\n",i=this.formOrder.items,a=1;i.forEach((function(e){s+="*".concat(a,". ").concat(e.name,"*\n"),e.note&&(s+="".concat(e.note,"\n")),s+="Jumlah: ".concat(e.quantity,"\nHarga (@): ").concat(t.moneyIDR(e.price),"\nHarga Total: ").concat(t.moneyIDR(e.quantity*e.price),"\n\n"),a++})),s+="Subtotal: *".concat(this.moneyIDR(this.formOrder.subtotal),"*\n"),s+="Ongkir: *".concat(this.moneyIDR(this.formOrder.shipping_cost),"*\n"),s+="Diskon: *".concat(this.moneyIDR(this.formOrder.coupon_discount),"*\n"),s+="Total: *".concat(this.moneyIDR(this.formOrder.total),"*\n"),s+="-----------------------------------\n\n",s+="*Nama:*\n ".concat(this.formOrder.customer_name," (").concat(this.formOrder.customer_phone,")\n\n"),s+="*Alamat:*\n".concat(this.formatAddressCod(this.formOrder.customer_address),"\n\n"),s+="Kurir: ".concat(this.formOrder.shipping_courier_name,"\n"),s+="Servis: ".concat(this.formOrder.shipping_courier_service,"\n");var n=e+"/send?phone="+r+"&text="+encodeURI(s);setTimeout((function(){t.$router.push({name:"Cart"})}),1e3),setTimeout((function(){t.$store.dispatch("cart/clearCart",t.session_id)}),5e3),window.open(n,"_blank")}}}},o=n,c=r("2877"),d=r("9989"),l=r("e359"),m=r("65c6"),h=r("9c40"),u=r("6ac5"),p=r("eb85"),g=r("1c1c"),f=r("66e5"),_=r("4074"),v=r("0170"),C=r("068f"),b=r("74f7"),O=r("e669"),y=r("7ff0"),q=r("eebe"),k=r.n(q),w=Object(c["a"])(o,s,i,!1,null,null,null);e["default"]=w.exports;k()(w,"components",{QPage:d["a"],QHeader:l["a"],QToolbar:m["a"],QBtn:h["a"],QToolbarTitle:u["a"],QSeparator:p["a"],QList:g["a"],QItem:f["a"],QItemSection:_["a"],QItemLabel:v["a"],QImg:C["a"],QInnerLoading:b["a"],QSpinnerFacebook:O["a"],QFooter:y["a"]})}}]);