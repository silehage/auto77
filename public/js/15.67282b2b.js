(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{5406:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=function(){var e=this,t=e._self._c;return t("q-page",[t("q-header",[t("q-toolbar",[t("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),t("q-toolbar-title",[e._v("\n       List Customer Service\n      ")]),t("q-btn",{attrs:{label:"Tambah CS",icon:"add",outline:""},on:{click:e.handleAddCs}})],1)],1),t("div",[t("q-list",{attrs:{separator:""}},[t("q-item",[t("q-item-section",{attrs:{side:""}},[e._v("#")]),t("q-item-section",[e._v("Nama Cs")]),t("q-item-section",[e._v("Ponsel")]),t("q-item-section",{attrs:{side:""}},[e._v("Aksi")])],1),e._l(e.customer_services,(function(n,a){return t("q-item",{key:a},[t("q-item-section",{attrs:{side:"",top:""}},[e._v(e._s(a+1))]),t("q-item-section",{attrs:{top:""}},[t("div",[e._v(e._s(n.name))])]),t("q-item-section",{attrs:{top:""}},[t("div",[e._v(e._s(n.phone))])]),t("q-item-section",{attrs:{side:""}},[t("div",{staticClass:"row q-gutter-sm"},[t("q-btn",{attrs:{size:"sm",color:"red-6",round:"",unelevated:"",icon:"eva-trash-2"},on:{click:function(t){return e.handleDeleteUser(n.id)}}},[t("q-tooltip",[e._v("\n                  Hapus User\n                ")])],1),t("q-btn",{attrs:{size:"sm",color:"blue",round:"",unelevated:"",icon:"eva-edit"},on:{click:function(t){return e.handleEditUser(n)}}},[t("q-tooltip",[e._v("\n                  Edit User\n                ")])],1)],1)])],1)})),e.userNotAvailable?t("q-item",[t("q-item-section",{staticClass:"text-center q-py-md"},[e._v("\n            Tidak ada data\n          ")])],1):e._e()],2),t("div",{staticClass:"q-py-md flex justify-center"},[e.canLoad?t("q-btn",{attrs:{loading:e.load,label:"Loadmore",color:"primary",outline:""},on:{click:e.loadUser}}):e._e()],1)],1),t("q-dialog",{model:{value:e.userModal,callback:function(t){e.userModal=t},expression:"userModal"}},[t("q-card",{staticClass:"card-lg"},[t("div",{staticClass:"card-heading"},[t("div",[e._v(e._s(e.formMode)+" CS")]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"eva-close",round:"",padding:"xs",flat:""}})],1),t("q-card-section",[t("q-form",{staticClass:"q-gutter-y-sm",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("q-input",{attrs:{color:"grey-6",label:"Nama *",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Wajib diisi"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-person-outline"}})]},proxy:!0}]),model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("q-input",{attrs:{color:"grey-6",label:"No Whatsapp *",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Wajib diisi"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-phone-outline"}})]},proxy:!0}]),model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),t("div",{staticClass:"column q-pt-md"},[t("q-btn",{attrs:{loading:e.loading,type:"submit",color:"primary",padding:"sm lg"}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)},o=[],i=(n("d3b7"),n("e6cf"),n("a79d"),n("ac1f"),n("5319"),n("2ca0"),n("758b")),s={name:"UserList",data:function(){return{take:10,canLoad:!1,search:"",userNotAvailable:!1,deleteId:null,load:!1,isPwd:!0,form:{_method:"POST",id:"",name:"",phone:""},formMode:"Tambah",userModal:!1}},mounted:function(){this.getCs()},computed:{isDesktop:function(){return window.innerWidth>600},loading:function(){return this.$store.state.loading},customer_services:function(){return this.$store.state.customer_services}},methods:{submit:function(){var e=this;this.checkInputPhone()&&(this.$store.commit("SET_LOADING",!0),"Tambah"==this.formMode&&(this.form._method="POST",Object(i["a"])().post("customer_service",this.form).then((function(){e.userModal=!1,e.getCs()})).finally((function(){return e.$store.commit("SET_LOADING",!1)}))),"Edit"==this.formMode&&(this.form._method="PUT",Object(i["a"])().put("customer_service/"+this.form.id,this.form).then((function(){e.userModal=!1,e.getCs()})).finally((function(){return e.$store.commit("SET_LOADING",!1)}))))},handleEditUser:function(e){this.clearForm(),this.formMode="Edit",this.form.id=e.id,this.form.name=e.name,this.form.phone=e.phone,this.userModal=!0},checkInputPhone:function(){return this.form.phone=this.form.phone.replace(/\D/g,""),!!this.checkPhoneNumber(this.form.phone)||(this.$q.notify({message:"Silahkan masukkan nomor whatsapp yang benar.",type:"negative"}),this.form.phone="",!1)},checkPhoneNumber:function(e){if(e.length>9&&(e.startsWith("08")||e.startsWith("628")))return!0},getCs:function(){var e=this;this.$q.loading.show(),Object(i["a"])().get("customer_service").then((function(t){200==t.status&&(e.$store.commit("SET_CS",t.data.results),e.userNotAvailable=!t.data.results.length)})).finally((function(){e.$q.loading.hide()}))},handleAddCs:function(){this.formMode="Tambah",this.clearForm(),this.userModal=!0},clearForm:function(){this.form.name="",this.form.phone=""},handleDeleteUser:function(e){var t=this;1!=e?this.$q.dialog({title:"Yakin akan menghapus user?",message:"Data yang di hapus tidak dapat dikembalikan",cancel:!0}).onOk((function(){t.deleteCs(e)})):this.$q.notify({type:"negative",message:"User admin tidak bisa di hapus"})},deleteCs:function(e){var t=this;i["a"].delete("customer_service/"+e).then((function(){t.getCs()}))}}},r=s,c=n("2877"),l=n("9989"),d=n("e359"),u=n("65c6"),m=n("9c40"),h=n("6ac5"),f=n("1c1c"),p=n("66e5"),v=n("4074"),b=n("05c0"),g=n("24e8"),q=n("f09f"),_=n("a370"),k=n("0378"),y=n("27f9"),C=n("0016"),S=n("2eeb"),T=n("7f67"),w=n("eebe"),Q=n.n(w),M=Object(c["a"])(r,a,o,!1,null,null,null);t["default"]=M.exports;Q()(M,"components",{QPage:l["a"],QHeader:d["a"],QToolbar:u["a"],QBtn:m["a"],QToolbarTitle:h["a"],QList:f["a"],QItem:p["a"],QItemSection:v["a"],QTooltip:b["a"],QDialog:g["a"],QCard:q["a"],QCardSection:_["a"],QForm:k["a"],QInput:y["a"],QIcon:C["a"]}),Q()(M,"directives",{GoBack:S["a"],ClosePopup:T["a"]})}}]);