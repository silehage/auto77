(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"01d1":function(t,e,a){},3092:function(t,e,a){"use strict";a("01d1")},c3d1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pb-lg bg-grey-2"},[a("q-header",{staticClass:"text-primary bg-white no-print box-shadow"},[a("q-toolbar",[a("q-btn",{attrs:{to:{name:"CustomerOrder"},flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),a("q-toolbar-title",{staticClass:"text-weight-bold brand"},[t.invoice?a("span",[t._v("Invoice "+t._s(t.invoice.order_ref))]):t._e()]),a("q-btn",{staticClass:"no-print",attrs:{icon:"eva-printer-outline",flat:"",round:""},on:{click:t.printInvoice}})],1)],1),t.invoice?a("div",{staticClass:"no-print q-pt-md"},[a("div",{staticClass:"q-gutter-y-md"},[a("div",{staticClass:"q-pb-lg bg-white q-px-md q-pt-md"},[a("div",{staticClass:"flex justify-between text-grey-8 q-py-md"},[a("div",{staticClass:"q-mb-sm"},[a("div",{staticClass:"text-weight-bold q-mb-xs text-lg"},[t._v(t._s(t.shop.name))]),a("div",{},[t._v(t._s(t.shop.phone))]),a("div",{domProps:{innerHTML:t._s(t.shop.address)}})]),a("div",[a("table",[a("tr",[a("td",[t._v("Invoice")]),a("td",[t._v(": "+t._s(t.invoice.order_ref))])]),a("tr",[a("td",[t._v("Referensi")]),a("td",[t._v(": "+t._s(t.invoice.transaction.payment_ref))])]),a("tr",[a("td",[t._v("Tanggal")]),a("td",[t._v(": "+t._s(t.invoice.created_at))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("div",{staticClass:"full-width q-px-md q-py-xs text-white text-center",class:t.statusColor(t.invoice.order_status)},[t._v("\n                    "+t._s(t.invoice.status_label)+"\n                  ")])])])])])]),a("div",{staticClass:"q-mt-lg text-grey-8"},[t.invoice.items?a("table",{staticClass:"table-order-item"},[a("tr",[a("th",{attrs:{align:"left"}},[t._v("Item")]),a("th",{attrs:{align:"left"}},[t._v("qty")]),a("th",{attrs:{align:"right"}},[t._v("Harga")])]),t._l(t.invoice.items,(function(e,i){return a("tr",{key:i},[a("td",{},[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(e.note))])]),a("td",[t._v(t._s(e.quantity))]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.moneyIDR(e.price)))])])}))],2):t._e(),a("div",{staticClass:"column justify-end items-end q-py-sm"},[a("table",{staticClass:"dense"},[a("tr",[a("td",{attrs:{align:"right"}},[t._v("Subtotal")]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.order_subtotal)))])]),a("tr",[a("td",{attrs:{align:"right"}},[t._v("Ongkos Kirim")]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.shipping_cost)))])]),t.invoice.service_fee?a("tr",[a("td",{attrs:{align:"right"}},[t._v(t._s(t.config.service_fee_label))]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.service_fee)))])]):t._e(),t.invoice.payment_fee>0?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Jasa pembayaran "),a("span",{staticClass:"text-xs"},[t._v("[ "+t._s(t.invoice.transaction.payment_name)+" ]")])]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.payment_fee)))])]):t._e(),t.invoice.order_unique_code?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Kode Unik")]),a("td",[t._v(":")]),a("td"),a("td",{attrs:{align:"right"}},[t._v("-"+t._s(t.invoice.order_unique_code))])]):t._e(),t.invoice.discount?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Diskon")]),a("td",{attrs:{align:"right"}},[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v("-"+t._s(t.invoice.discount?t.$money(t.invoice.discount):0))])]):t._e(),a("tr",{staticClass:"q-py-md"},[a("th",{attrs:{align:"right"}},[t._v("Total Bayar")]),a("th",{attrs:{align:"right"}},[t._v(":")]),a("th",[t._v("Rp")]),a("th",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.grand_total)))])])])]),a("div",{staticClass:"flex justify-end q-py-sm bg-grey-1"},[a("table",{staticClass:"table dense"})])])]),a("q-card",{staticClass:"shadow",attrs:{flat:"",square:""}},[a("div",{staticClass:"card-heading"},[t._v("Customer")]),a("q-card-section",[a("div",{staticClass:"text-grey-9"},[a("table",{staticClass:"dense"},[a("tr",[a("td",[t._v("Nama")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.customer_name))])]),a("tr",[a("td",[t._v("Whatsapp")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.customer_whatsapp))])]),a("tr",[a("td",{staticStyle:{"vertical-align":"top"}},[t._v("Alamat")]),a("td",{staticStyle:{"vertical-align":"top"}},[t._v(":")]),a("td",[a("div",{domProps:{innerHTML:t._s(t.invoice.shipping_address)}})])])])])])],1),a("q-card",{staticClass:"bg-white shadow",attrs:{square:""}},[a("div",{staticClass:"card-heading"},[t._v("Ekspedisi")]),a("q-card-section",[a("div",{staticClass:"text-grey-9"},[a("table",{staticClass:"dense"},[a("tr",[a("td",[t._v("Kurir")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.shipping_courier_name))])]),a("tr",[a("td",[t._v("Service")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.shipping_courier_service?t.invoice.shipping_courier_service:"-"))])]),t.invoice.shipping_courier_code?a("tr",[a("td",[t._v("No Resi")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.shipping_courier_code))])]):t._e()])])])],1),a("q-card",{staticClass:"bg-white shadow",attrs:{square:""}},[a("div",{staticClass:"card-heading border-b"},[t._v("Pembayaran")]),a("q-card-section",[a("table",{staticClass:"dense"},[a("tr",[a("td",[t._v("Metode")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.transaction.payment_type.split("_").join(" ")))])]),a("tr",[a("td",{staticStyle:{"vertical-align":"top"}},[t._v("Detil")]),a("td",{staticStyle:{"vertical-align":"top"}},[t._v(":")]),a("td",[a("div",{domProps:{innerHTML:t._s(t.invoice.transaction.payment_name)}})])]),a("tr",[a("td",[t._v("Referensi")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.transaction.payment_ref))])])])])],1)],1),a("q-dialog",{attrs:{persistent:"",maximized:"",seamless:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.modalPayment,callback:function(e){t.modalPayment=e},expression:"modalPayment"}},[a("q-card",{staticClass:"max-width bg-grey-2",attrs:{flat:"",square:""}},[a("q-toolbar",{staticClass:"bg-white sticky-top border-b"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold card-heading"},[t._v("Pembayaran")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"eva-close"}})],1),a("keep-alive",[a(t.isPaymentType,{tag:"component",attrs:{transaction:t.invoice.transaction},on:{kirimBukti:t.kirimBuktiTransfer}})],1)],1)],1),"UNPAID"==t.invoice.order_status?a("q-footer",{staticClass:"bg-grey-2 q-pa-md"},[a("div",{staticClass:"text-center text-grey-7 column q-gutter-y-sm"},[t.invoice&&"COD"!=t.invoice.transaction.payment_method?a("q-btn",{attrs:{label:"Instruksi Pembayaran","no-caps":"",icon:"payments",color:"green-7"},on:{click:function(e){return e.preventDefault(),t.handlePaymentModal(e)}}}):t._e(),a("q-btn",{ref:"chatAdmin",attrs:{label:"Chat admin",name:"eva-message-circle","no-caps":"",color:"blue-7"},on:{click:t.chatToAdmin}})],1)]):t._e()],1):t._e(),a("q-inner-loading",{staticClass:"no-print",attrs:{showing:t.loading}},[a("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1),t.invoice?a("div",{class:{"no-print":t.isPrintPacking}},[a("div",{staticClass:"print-invoice"},[a("div",{},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"text-lg text-weight-bold"},[t._v("Invoice")]),a("div",{staticClass:"q-mb-xs flex justify-between item-start"},[a("table",{},[a("tr",[a("td",{attrs:{align:"left"}},[t._v("No")]),a("td",[t._v(":")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.invoice.order_ref))])]),a("tr",[a("td",{attrs:{align:"left"}},[t._v("Dibuat")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.created_at))])]),a("tr",[a("td",[t._v("Referensi")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.transaction.payment_ref))])]),a("tr",[a("td",{attrs:{align:"left"}},[t._v("Pembayaran")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.transaction.payment_name))])])]),t.qrData?a("div",{},[a("img",{attrs:{src:t.qrData,width:"80",height:"80"}})]):t._e()]),a("div",{staticClass:"flex justify-between items-start"},[a("div",{staticStyle:{"max-width":"45%"}},[a("div",{staticClass:"text-weight-medium q-mb-xs"},[t._v("Ditagihkan Kepada:")]),a("div",{staticClass:"text-weight-bold text-md"},[t._v(t._s(t.invoice.customer_name))]),a("div",[t._v(t._s(t.invoice.customer_whatsapp))]),a("div",{domProps:{innerHTML:t._s(t.invoice.shipping_address)}})]),a("div",{staticClass:"text-right",staticStyle:{"max-width":"45%"}},[a("div",{staticClass:"text-weight-medium q-mb-xs"},[t._v("Dibayarkan Kepada:")]),a("div",{staticClass:"text-weight-bold q-mb-xs text-md"},[t._v(t._s(t.shop.name))]),a("div",{},[t._v(t._s(t.shop.phone))]),a("div",{domProps:{innerHTML:t._s(t.shop.address)}})])]),a("div",{},[a("div",{staticClass:"text-weight-bold q-mb-xs"},[t._v("Detil Pesanan:")]),t.invoice.items?a("table",{staticClass:"table-order-item"},[a("tr",[a("th",{attrs:{align:"left"}},[t._v("Item")]),a("th",{attrs:{align:"left"}},[t._v("qty")]),a("th",{attrs:{align:"right"}},[t._v("Harga")])]),t._l(t.invoice.items,(function(e,i){return a("tr",{key:i},[a("td",{},[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(e.note))])]),a("td",[t._v(t._s(e.quantity))]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(e.price)))])])}))],2):t._e(),a("div",{staticClass:"column justify-end items-end q-mt-sm"},[a("table",{staticClass:"dense"},[a("tr",[a("td",{attrs:{align:"right"}},[t._v("Jumlah")]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.order_subtotal)))])]),a("tr",[a("td",{attrs:{align:"right"}},[t._v("Ongkos Kirim")]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.shipping_cost)))])]),t.invoice.service_fee?a("tr",[a("td",{attrs:{align:"right"}},[t._v(t._s(t.config.service_fee_label))]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.service_fee)))])]):t._e(),t.invoice.payment_fee>0?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Jasa Pembayaran "),a("span",{staticClass:"text-xs text-grey-7"},[t._v(" [ "+t._s(t.invoice.transaction.payment_name)+" ] ")])]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.payment_fee)))])]):t._e(),t.invoice.order_unique_code?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Kode Unik")]),a("td",{attrs:{align:"right"}},[t._v(":")]),a("td"),a("td",{attrs:{align:"right"}},[t._v("-"+t._s(t.invoice.order_unique_code))])]):t._e(),t.invoice.discount?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Diskon (-)")]),a("td",{attrs:{align:"right"}},[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.invoice.discount?t.moneyIDR(t.invoice.discount):0))])]):t._e(),a("tr",[a("th",{attrs:{align:"right"}},[t._v("Total Bayar")]),a("th",{attrs:{align:"right"}},[t._v(":")]),a("th",[t._v("Rp")]),a("th",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.grand_total)))])])])])])])])])]):t._e(),t.invoice?a("div",{class:{"no-print":t.isPrintInvoice}},[a("div",{staticClass:"print-packing"},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"flex justify-between"},[a("div",{},[a("div",{staticClass:"text-weight-medium q-mb-xs text-weight-bold"},[t._v("Penerima:")]),a("table",[a("tr",[a("td",{attrs:{align:"left"}},[t._v("Nama")]),a("td",{attrs:{align:"left"}},[t._v(":")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.invoice.customer_name))])]),a("tr",[a("td",{attrs:{align:"left"}},[t._v("No Ponsel")]),a("td",{attrs:{align:"left"}},[t._v(":")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.invoice.customer_whatsapp))])])]),a("div",{staticClass:"q-mt-sm text-weight-bold"},[t._v("Alamat:")]),a("div",{domProps:{innerHTML:t._s(t.invoice.shipping_address)}})]),a("div",{},[a("div",{staticClass:"text-weight-medium q-mb-xs text-weight-bold"},[t._v("Pengirim:")]),a("table",[a("tr",[a("td",{attrs:{align:"left"}},[t._v("Toko")]),a("td",{attrs:{align:"left"}},[t._v(":")]),a("th",{attrs:{align:"left"}},[t._v(t._s(t.shop.name))])]),a("tr",[a("td",{attrs:{align:"left"}},[t._v("No Ponsel")]),a("td",{attrs:{align:"left"}},[t._v(":")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.shop.phone))])])]),a("div",{staticClass:"q-pl-xs"},[t._v(t._s(t.shop.app_url))]),t.shop.address?a("div",[a("div",{staticClass:"q-mt-sm text-weight-bold"},[t._v("Alamat Toko:")]),a("div",{domProps:{innerHTML:t._s(t.shop.address)}})]):t._e()])]),a("div",{staticClass:"q-mt-sm"},[a("div",{staticClass:"q-mb-xs text-weight-bold"},[t._v("Detil Pesanan:")]),t.invoice.items?a("table",{staticClass:"table-order-item"},[a("tr",[a("th",{attrs:{align:"left"}},[t._v("Item")]),a("th",{attrs:{align:"left"}},[t._v("qty")])]),t._l(t.invoice.items,(function(e,i){return a("tr",{key:i},[a("td",{},[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(e.note))])]),a("td",[t._v(t._s(e.quantity))])])}))],2):t._e(),a("div",{staticClass:"flex justify-end q-py-sm bg-grey-1"},[a("table",[a("tr",[a("td",{attrs:{align:"right"}},[t._v("Jumlah")]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.order_subtotal)))])]),a("tr",[a("td",{attrs:{align:"right"}},[t._v("Ongkos Kirim")]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.shipping_cost)))])]),t.invoice.service_fee?a("tr",[a("td",{attrs:{align:"right"}},[t._v(t._s(t.config.service_fee_label))]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.service_fee)))])]):t._e(),t.invoice.payment_fee>0?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Jasa pembayaran "),a("span",{staticClass:"text-xs"},[t._v("[ "+t._s(t.invoice.transaction.payment_name)+" ]")])]),a("td",[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.payment_fee)))])]):t._e(),t.invoice.order_unique_code?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Kode Unik")]),a("td",[t._v(":")]),a("td"),a("td",{attrs:{align:"right"}},[t._v("-"+t._s(t.invoice.order_unique_code))])]):t._e(),t.invoice.discount?a("tr",[a("td",{attrs:{align:"right"}},[t._v("Diskon")]),a("td",{attrs:{align:"right"}},[t._v(":")]),a("td",[t._v("Rp")]),a("td",{attrs:{align:"right"}},[t._v("-"+t._s(t.invoice.discount?t.$money(t.invoice.discount):0))])]):t._e(),a("tr",[a("th",{attrs:{align:"right"}},[t._v("Total Bayar")]),a("td",{attrs:{align:"right"}},[t._v(":")]),a("td",[t._v("Rp")]),a("th",{attrs:{align:"right"}},[t._v(t._s(t.$money(t.invoice.grand_total)))])])])])]),a("div",{},[a("div",{staticClass:"q-mb-xs text-weight-bold"},[t._v("Kurir:")]),a("table",[a("tr",[a("td",[t._v("Kurir")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.shipping_courier_name))])]),a("tr",[a("td",[t._v("Service")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.shipping_courier_service?t.invoice.shipping_courier_service:"-"))])]),a("tr",[a("td",[t._v("No Resi")]),a("td",[t._v(":")]),a("td",[t._v(t._s(t.invoice.shipping_courier_code?t.invoice.shipping_courier_code:"-"))])])])])])])]):t._e()],1)},s=[],n=a("ded3"),r=a.n(n),o=(a("99af"),a("b0c0"),a("ac1f"),a("5319"),a("2ca0"),a("cdde")),c=a("2f62"),d=a("d055"),l=a.n(d),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-grey-9"},[t.transaction?a("div",{staticClass:"q-gutter-y-lg"},[a("q-card",{staticClass:"shadow",attrs:{square:""}},[a("div",{staticClass:"q-py-md"},[a("q-list",[a("q-item",{staticClass:"text-weight-bold",attrs:{dense:""}},[a("q-item-section",[a("div",[t._v("Total Tagihan")])]),a("q-item-section",{attrs:{side:""}},[a("div",{staticClass:"text-md"},[t._v(t._s(t.moneyIDR(t.transaction.amount)))])])],1)],1)],1)]),a("q-card",{staticClass:"shadow",attrs:{square:""}},[a("div",{staticClass:"card-heading"},[t._v("Metode Pembayaran")]),a("q-card-section",[a("div",{},[a("div",[a("div",{staticClass:"text-md text-weight-bold text-primary"},[t._v(t._s(t.transaction.payment_type.split("_").join(" ")))]),a("div",{staticClass:"text-grey-7 q-mt-sm",staticStyle:{"font-size":"13.5px"}},[t._v("\n            Lakukan pembayaran sebelum melewati batas pembayaran, Pastikan nominal pembayaran sesuai dengan tagihan, Pembayaran akan di "),a("b",[t._v("verifikasi otomatis oleh sistem.")])])])])])],1),a("q-card",{staticClass:"shadow",attrs:{square:""}},[a("div",{staticClass:"card-heading"},[t._v("Informasi Pembayaran")]),a("q-card-section",[a("div",{staticClass:"q-gutter-y-sm"},[t.isOVO?t._e():[t.transaction.qr_url?a("div",{staticClass:"column justify-center items-center q-gutter-y-sm"},[a("div",[t._v("QR CODE "+t._s(t.transaction.payment_name))]),a("img",{staticStyle:{width:"120px",height:"auto"},attrs:{src:t.transaction.qr_url}}),a("div",[a("q-btn",{attrs:{unelevated:"",color:"primary",size:"12px","text-color":"white",label:"Perbesar"},on:{click:function(e){t.viewQrModal=!0}}})],1)]):t._e(),t.transaction.payment_code?a("div",[a("div",[t._v("Kode Bayar")]),a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-lg text-weight-bold text-primary"},[t._v(t._s(t.transaction.payment_code))]),a("div",[a("q-btn",{attrs:{unelevated:"",color:"primary",size:"12px","text-color":"white",label:"Salin Nomor"},on:{click:t.copy}})],1)])]):t._e()],t.isOVO?[a("div",{staticClass:"text-lg text-weight-bold text-primary"},[t._v(t._s(t.transaction.payment_name))]),a("div",{staticClass:"text-grey-7"},[t._v("( Lihat panduan pembayaran )")])]:t._e()],2),a("div",{staticClass:" q-gutter-y-xs q-mt-lg"},[a("div",[t._v("Batas Pembayaran")]),a("div",{staticClass:"text-weight-medium"},[t._v(t._s(t.formatCountDown(t.transaction.expired_time)))])])])],1),t.transaction?a("div",{staticClass:"bg-white"},[a("div",{staticClass:"card-heading"},[t._v("Panduan Pembayaran")]),a("q-list",{staticClass:"text-grey-9",attrs:{bordered:""}},[t._l(t.instructions,(function(e,i){return[a("q-expansion-item",{key:i,attrs:{group:"somegroup",label:e.title,"default-opened":0==i,"header-class":"bg-grey-7 text-white","expand-icon-class":"text-white"}},[a("q-card",{staticClass:"q-py-md q-pb-xl"},[a("q-list",{attrs:{bordered:""}},t._l(e.steps,(function(e,i){return a("q-item",{key:i},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"grey-7","text-color":"white",size:"sm"}},[t._v("\n                      "+t._s(i+1)+"\n                    ")])],1),a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(e)}})],1)],1)})),1)],1)],1)]}))],2)],1):t._e()],1):t._e(),a("q-dialog",{attrs:{persistent:"",maximized:""},model:{value:t.viewQrModal,callback:function(e){t.viewQrModal=e},expression:"viewQrModal"}},[a("q-card",{staticClass:"max-width",attrs:{flat:""}},[a("div",{staticClass:"row justify-between items-center box-shadow q-pa-md"},[a("div",{staticClass:"text-weight-medium text-md"},[t._v("Scan atau download Qr Code")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"eva-close",flat:"",round:""}})],1),a("q-card-section",{staticClass:"flex justify-center items-center q-pt-lg"},[a("img",{staticStyle:{"max-width":"380px",width:"100%",height:"auto"},attrs:{src:t.transaction.qr_url}})])],1)],1)],1)},_=[],m={name:"PaymentGateway",props:["transaction"],data:function(){return{viewQrModal:!1}},computed:{isOVO:function(){return"OVO"==this.transaction.payment_method},isQRIS:function(){return"QRIS"==this.transaction.payment_method},instructions:function(){var t=JSON.parse(this.transaction.instructions);return this.isOVO&&(t[0].steps=["Periksa <b>aplikasi OVO</b> di Ponsel Anda","Akan muncul prompt transaksi. Pastikan data transaksi sudah sesuai","Klik tombol <b>Bayar</b>","Transaksi selesai. Simpan bukti pembayaran Anda"]),t}},methods:{copy:function(){var t=this;Object(o["a"])(this.transaction.payment_code).then((function(){t.$q.notify({type:"positive",message:"Berhasil menyalin kode bayar"})})).catch((function(){}))},formatCountDown:function(t){var e=new Date(1e3*t);return new Intl.DateTimeFormat("id-ID",{dateStyle:"full",timeStyle:"long"}).format(e)},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)}}},u=m,g=a("2877"),p=a("f09f"),h=a("1c1c"),y=a("66e5"),f=a("4074"),b=a("a370"),q=a("9c40"),C=a("3b73"),x=a("cb32"),w=a("0170"),k=a("24e8"),P=a("7f67"),I=a("eebe"),D=a.n(I),T=Object(g["a"])(u,v,_,!1,null,null,null),O=T.exports;D()(T,"components",{QCard:p["a"],QList:h["a"],QItem:y["a"],QItemSection:f["a"],QCardSection:b["a"],QBtn:q["a"],QExpansionItem:C["a"],QAvatar:x["a"],QItemLabel:w["a"],QDialog:k["a"]}),D()(T,"directives",{ClosePopup:P["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-grey-9"},[t.transaction?a("div",{staticClass:"q-gutter-y-lg"},[a("q-card",{staticClass:"shadow",attrs:{square:""}},[a("div",{staticClass:"q-py-md"},[a("q-list",[a("q-item",{staticClass:"text-weight-bold",attrs:{dense:""}},[a("q-item-section",[a("div",[t._v("Total Tagihan")])]),a("q-item-section",{attrs:{side:""}},[a("div",{staticClass:"text-md"},[t._v(t._s(t.moneyIDR(t.transaction.amount)))])])],1)],1)],1)]),a("q-card",{staticClass:"shadow",attrs:{square:""}},[a("div",{staticClass:"card-heading"},[t._v("Metode Pembayaran")]),a("q-card-section",[a("div",{},[a("div",[a("div",{staticClass:"text-md text-weight-bold text-primary"},[t._v(t._s(t.transaction.payment_type.split("_").join(" ")))]),a("div",{staticClass:"text-grey-7 q-mt-sm",staticStyle:{"font-size":"13.5px"}},[t._v("\n              Lakukan pembayaran sebelum melewati batas pembayaran, Pastikan nominal pembayaran sesuai dengan Tagihan, Konfirmasi pembayaran dengan megirim bukti transfer\n          ")])])])])],1),a("q-card",{staticClass:"shadow",attrs:{square:""}},[a("div",{staticClass:"card-heading"},[t._v("Informasi Pembayaran")]),a("q-card-section",[a("div",{staticClass:"q-gutter-y-sm"},[a("div",[t._v("No. Rekening")]),a("div",{staticClass:"row justify-between items-center"},[a("div",{staticClass:"text-lg text-weight-bold text-primary"},[t._v(t._s(t.transaction.payment_code))]),a("div",[a("q-btn",{attrs:{unelevated:"",color:"primary",size:"12px","text-color":"white",label:"Salin No Rekening"},on:{click:t.copy}})],1)]),a("div",{staticClass:"text-sm text-grey-7",domProps:{innerHTML:t._s(t.transaction.payment_name)}})]),a("div",{staticClass:"q-gutter-y-xs q-mt-lg"},[a("div",[t._v("Batas Pembayaran")]),a("div",{staticClass:"text-weight-medium text-xs"},[t._v(t._s(t.expiredFormatDate))])])])],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"card-heading"},[t._v("Panduan Pembayaran")]),a("q-list",{staticClass:"text-grey-9",attrs:{bordered:""}},[[a("q-expansion-item",{attrs:{group:"somegroup",label:"Bank Transfer","default-opened":"","header-class":"bg-grey-7 text-white","expand-icon-class":"text-white"}},[a("q-card",{staticClass:"q-py-md q-pb-xl"},[a("q-list",{attrs:{bordered:""}},t._l(t.instructions,(function(e,i){return a("q-item",{key:e},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"grey-7","text-color":"white",size:"sm"}},[t._v("\n                      "+t._s(i+1)+"\n                    ")])],1),a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(e)}})],1)],1)})),1)],1)],1)]],2),a("div",{staticClass:"sticky-bottom q-pa-md bg-white"},[a("q-btn",{staticClass:"full-width",staticStyle:{"border-radius":"none"},attrs:{unelevated:"","no-caps":"",label:"Kirim Bukti Transfer Disini",color:"primary","text-color":"white"},on:{click:function(e){return e.preventDefault(),t.kirimBuktiTransfer(e)}}})],1)],1)],1):t._e()])},S=[],Q={name:"DirectPayment",props:["transaction"],data:function(){return{modal:!1,preview:"",fileData:""}},computed:{instructions:function(){var t=["Lakukan transfer ke nomor rekening <b>".concat(this.transaction.payment_code,".</b>"),"Transfer dengan total pembayaran  <b>".concat(this.priceFormated,"</b><br> <small>( jangan dibulatkan )</small> "),"Simpan dan <b>kirim bukti pembayaran.</b>","Kirim bukti transfer sebelum <b>".concat(this.expiredFormatDate," </b> agar pesananmu segera diproses.")];return t},priceFormated:function(){return this.moneyIDR(this.transaction.amount)},expiredFormatDate:function(){var t=new Date(1e3*this.transaction.expired_time);return new Intl.DateTimeFormat("id-ID",{dateStyle:"full",timeStyle:"long"}).format(t)}},methods:{copy:function(){var t=this;Object(o["a"])(this.transaction.payment_code).then((function(){t.$q.notify({type:"positive",message:"Berhasil menyalin nomor rekening"})})).catch((function(){}))},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)},kirimBuktiTransfer:function(){this.$emit("kirimBukti")}}},$=Q,N=Object(g["a"])($,R,S,!1,null,null,null),j=N.exports;D()(N,"components",{QCard:p["a"],QList:h["a"],QItem:y["a"],QItemSection:f["a"],QCardSection:b["a"],QBtn:q["a"],QExpansionItem:C["a"],QAvatar:x["a"],QItemLabel:w["a"]});var B={name:"InvoiceIndex",components:{PaymentGateway:O,DirectPayment:j},data:function(){return{modalPayment:!1,throtle:1,interval:null,isPrintPacking:!1,isPrintInvoice:!1,timeout:null,requestCount:1,whatsappUrl:"https://api.whatsapp.com",qrData:""}},computed:r()(r()({},Object(c["e"])({loading:function(t){return t.loading},shop:function(t){return t.shop},invoice:function(t){return t.order.invoice},config:function(t){return t.config}})),{},{isPaymentType:function(){var t=this.invoice.transaction.payment_type;return"DIRECT"==t||"BANK_TRANSFER"==t?"DirectPayment":"PaymentGateway"},title:function(){return this.invoice?"Tagihan ".concat(this.invoice.order_ref):"Tagihan"}}),created:function(){this.invoice?this.invoice.order_ref!=this.$route.params.order_ref?this.getOrder():(this.ready=!0,this.checkOrderStatus()):this.getOrder()},mounted:function(){this.$q.platform.is.desktop&&(this.whatsappUrl="https://web.whatsapp.com")},methods:r()(r()({},Object(c["b"])("order",["getOrderById"])),{},{statusColor:function(t){return"UNPAID"==t?"bg-grey-7":"CANCELED"==t?"bg-red-6":"COMPLETE"==t?"bg-green-6":"bg-blue-7"},generateQr:function(){var t=this,e={errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:1};l.a.toDataURL(this.getRoutePath(),e,(function(e,a){if(e)throw e;console.log(a),t.qrData=a,console.log(t.qrData)}))},getRoutePath:function(){var t=this.$router.resolve({name:"UserInvoice",params:{order_ref:this.invoice.order_ref}});return location.origin+t.href},printInvoice:function(){this.qrData||this.generateQr();var t=(new Date).toDateString();document.title="INVOICE #".concat(this.invoice.order_ref," ").concat(t),this.isPrintPacking=!1,this.isPrintInvoice=!0,setTimeout((function(){window.print()}),200)},printPacking:function(){var t=(new Date).toDateString();document.title="PACKING #".concat(this.invoice.order_ref," ").concat(t),this.isPrintPacking=!0,this.isPrintInvoice=!1,setTimeout((function(){window.print()}),200)},getOrder:function(){var t=this;this.$store.commit("SET_LOADING",!0),this.$route.params.order_ref?this.getOrderById(this.$route.params.order_ref).then((function(e){200==e.status&&t.$store.commit("order/SET_INVOICE",e.data.results),t.$store.commit("SET_LOADING",!1),t.checkOrderStatus(),setTimeout((function(){t.generateQr()}),1e3)})).catch((function(){t.$router.push({name:"Cart"})})):this.$router.push({name:"Cart"})},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)},chatToAdmin:function(){var t="Halo ".concat(this.shop.name,",\nMohon pesanan saya untuk segera di proses.\nTerima Kasih.\n\nReferensi Order:\n").concat(location.href),e="".concat(this.whatsappUrl,"/send?phone=").concat(this.formatPhoneNumber(this.shop.phone),"&text=").concat(encodeURI(t));window.open(e,"_blank")},kirimBuktiTransfer:function(){this.modalPayment=!1;var t="Halo kak, saya akan mengkonfirmasi pembayaran atas pesanan\nInvoice ID: *".concat(this.invoice.order_ref,"*\nReferensi Order:\n").concat(location.href,"\n"),e="".concat(this.whatsappUrl,"/send?phone=").concat(this.formatPhoneNumber(this.shop.phone),"&text=").concat(encodeURI(t));window.open(e,"_blank")},formatPhoneNumber:function(t){var e=t.replace(/\D/g,"");return e.startsWith("0")&&(e="62"+e.substr(1)),e},copy:function(t){var e=this;Object(o["a"])(t).then((function(){e.$q.notify({type:"positive",message:"Berhasil menyalin nomor rekening"})})).catch((function(){e.$q.notify({type:"negative",message:"Browser anda tidak support copy to clipboard"})}))},handlePaymentModal:function(){this.modalPayment=!0},getCheckOrder:function(){var t=this;this.getOrderById(this.$route.params.order_ref).then((function(e){200==e.status&&(t.$store.commit("order/SET_INVOICE",e.data.results),t.checkOrderStatus())}))},checkOrderStatus:function(){var t=this;"UNPAID"==this.invoice.order_status||"PROCESS"==this.invoice.order_status&&this.requestCount<10?this.timeout=setTimeout((function(){t.requestCount++,t.getCheckOrder()}),2e4):clearTimeout(this.timeout)}}),beforeDestroy:function(){clearTimeout(this.timeout)},meta:function(){return{title:this.title,meta:{ogTitle:{property:"og:title",content:this.title}}}}},L=B,M=(a("3092"),a("9989")),E=a("e359"),A=a("65c6"),K=a("6ac5"),H=a("7ff0"),U=a("74f7"),F=a("e669"),z=Object(g["a"])(L,i,s,!1,null,null,null);e["default"]=z.exports;D()(z,"components",{QPage:M["a"],QHeader:E["a"],QToolbar:A["a"],QBtn:q["a"],QToolbarTitle:K["a"],QCard:p["a"],QCardSection:b["a"],QDialog:k["a"],QFooter:H["a"],QInnerLoading:U["a"],QSpinnerFacebook:F["a"]}),D()(z,"directives",{ClosePopup:P["a"]})}}]);