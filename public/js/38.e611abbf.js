(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{ae08:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("q-page",[e("q-header",[e("q-toolbar",[e("q-btn",{attrs:{to:{name:"Settings"},flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),e("q-toolbar-title",[t._v("\n       Produk Promo\n      ")]),e("q-btn",{staticClass:"gt-xs",attrs:{outline:"",icon:"eva-plus-circle",label:"Promo"},on:{click:t.handleAdd}})],1),e("q-page-sticky",{staticClass:"lt-sm",attrs:{position:"bottom-right",offset:[12,12]}},[e("q-btn",{attrs:{fab:"",icon:"add",color:"primary",glossy:""},on:{click:t.handleAdd}})],1),e("div",{staticClass:"text-dark box-shadow",class:t.$q.dark.isActive?"bg-dark":"bg-white"},[e("q-list",[e("q-item",[e("q-item-section",{attrs:{side:""}},[t._v("#")]),e("q-item-section",[t._v("Label / Produk Total")]),e("q-item-section",[t._v("Status")]),e("q-item-section",{attrs:{side:""}},[t._v("Action")])],1)],1)],1)],1),e("div",[e("q-separator")],1),e("div",{staticClass:"q-py-sm"},[e("q-list",{attrs:{separator:""}},[t._l(t.promos,(function(a,o){return e("q-item",{key:o},[e("q-item-section",{attrs:{side:""}},[t._v(t._s(o+1))]),e("q-item-section",[e("q-item-label",[e("span",[t._v(t._s(a.label))]),e("span",{staticClass:"q-ml-sm"},[t._v("("+t._s(a.products_count)+")")])])],1),e("q-item-section",[e("q-item-label",[e("q-chip",{attrs:{size:"sm","text-color":"white",color:a.is_active?"green":"grey",label:a.is_active?"Active":"Inactive"}})],1)],1),e("q-item-section",{attrs:{side:""}},[e("div",{staticClass:"q-gutter-sm"},[e("q-btn",{attrs:{size:"11px",unelevated:"",color:"red",icon:"eva-trash-2",round:""},on:{click:function(e){return t.handleDelete(a.id)}}}),e("q-btn",{attrs:{size:"11px",unelevated:"",color:"teal",icon:"edit_calendar",round:""},on:{click:function(e){return t.handleEdit(a)}}}),e("q-btn",{attrs:{size:"11px",unelevated:"",color:"blue",icon:"edit_note",round:""},on:{click:function(e){return t.$router.push({name:"PromoDetail",params:{id:a.id}})}}})],1)])],1)})),t.promos.length?t._e():e("q-item",[e("q-item-section",{staticClass:"text-center"},[t._v("\n            Tidak ada data\n          ")])],1)],2)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("q-card",{staticClass:"card-medium"},[e("div",{staticClass:"card-heading"},[t._v(t._s(t.formType)+" Promo")]),e("q-form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("q-card-section",{staticClass:"q-gutter-y-sm"},[e("q-input",{attrs:{required:"",filled:"",square:"",label:"Label",rules:[function(t){return!!t||"Field is required"}]},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}}),e("q-input",{attrs:{label:"Start Date",filled:"",readonly:"",rules:[function(t){return!!t||"Field is required"}]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{attrs:{cover:"","transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1),e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{cover:"","transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}}),e("q-input",{attrs:{label:"End Date",filled:"",readonly:"",rules:[function(t){return!!t||"Field is required"}]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{attrs:{cover:"","transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1),e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{cover:"","transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1),e("q-card-actions",{staticClass:"justify-end q-pa-md sticky-bottom"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"button",color:"secondary",label:"Batal"}}),e("q-btn",{attrs:{loading:t.loading,type:"submit",color:"primary",label:"Simpan Data"}})],1)],1)],1)],1)],1)},s=[],r=a("ded3"),i=a.n(r),n=a("2f62"),l={name:"PromoIndex",data:function(){return{modal:!1,form:{id:"",start_date:"",end_date:"",label:""},selectedData:null,formType:"Tambah",search:"",productSearch:[]}},computed:i()(i()({},Object(n["e"])({products:function(t){return t.promo.products},promos:function(t){return t.promo.promos}})),{},{isDesktop:function(){return window.innerWidth>600}}),methods:i()(i()({},Object(n["b"])("promo",["getPromos","storePromo","updatePromo","deletePromo","getProductPromo"])),{},{handleAdd:function(){this.clearForm(),this.formType="Tambah",this.modal=!0},handleEdit:function(t){this.clearForm(),this.formType="Edit",this.selectedData=t,this.setInputData(),this.modal=!0},handleDelete:function(t){var e=this;this.$q.dialog({title:"Yakin akan menghapus ini?",cancel:!0}).onOk((function(){e.deletePromo(t)}))},setInputData:function(){this.form.id=this.selectedData.id,this.form.label=this.selectedData.label,this.form.start_date=this.selectedData.start_date,this.form.end_date=this.selectedData.end_date,this.form.discount_id=this.selectedData.discount_id},submit:function(){var t=this,e=this.form;"Edit"==this.formType&&(e._method="PUT",this.updatePromo(e).then((function(){t.closeModal()}))),"Tambah"==this.formType&&this.storePromo(e).then((function(){t.closeModal()}))},searchProduct:function(t){},closeModal:function(){this.clearForm(),this.modal=!1},clearForm:function(){this.form.id="",this.form.label="",this.form.start_date="",this.form.end_date=""}}),mounted:function(){this.getPromos()}},c=l,d=a("2877"),m=a("9989"),u=a("e359"),p=a("65c6"),f=a("9c40"),b=a("6ac5"),h=a("de5e"),q=a("1c1c"),v=a("66e5"),_=a("4074"),y=a("eb85"),k=a("0170"),C=a("b047"),D=a("24e8"),g=a("f09f"),w=a("0378"),x=a("a370"),P=a("27f9"),Q=a("0016"),Y=a("7cbe"),T=a("52ee"),M=a("ca78"),S=a("4b7e"),$=a("7f67"),H=a("eebe"),I=a.n(H),j=Object(d["a"])(c,o,s,!1,null,null,null);e["default"]=j.exports;I()(j,"components",{QPage:m["a"],QHeader:u["a"],QToolbar:p["a"],QBtn:f["a"],QToolbarTitle:b["a"],QPageSticky:h["a"],QList:q["a"],QItem:v["a"],QItemSection:_["a"],QSeparator:y["a"],QItemLabel:k["a"],QChip:C["a"],QDialog:D["a"],QCard:g["a"],QForm:w["a"],QCardSection:x["a"],QInput:P["a"],QIcon:Q["a"],QPopupProxy:Y["a"],QDate:T["a"],QTime:M["a"],QCardActions:S["a"]}),I()(j,"directives",{ClosePopup:$["a"]})}}]);