(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[55],{f55e:function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("q-page",{staticClass:"q-pb-xl"},[e("q-header",[e("q-toolbar",[e("q-btn",{attrs:{to:{name:"Settings"},flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),e("q-toolbar-title",[t._v("\n       Pengaturan Toko\n      ")])],1)],1),e("div",{staticClass:"q-pa-md q-gutter-y-md"},[e("div",{staticClass:"q-gutter-y-md"},[e("q-input",{attrs:{label:"Nama Toko"},model:{value:t.form.name,callback:function(o){t.$set(t.form,"name",o)},expression:"form.name"}}),e("q-input",{attrs:{label:"Nomor Whatsapp",placeholder:"0812*******"},model:{value:t.form.phone,callback:function(o){t.$set(t.form,"phone",o)},expression:"form.phone"}}),e("q-input",{attrs:{label:"Slogan"},model:{value:t.form.slogan,callback:function(o){t.$set(t.form,"slogan",o)},expression:"form.slogan"}}),t.errors.phone?e("div",{staticClass:"q-my-xs text-red text-sm"},[t._v("Nomor Whatsapp harus berupa angka")]):t._e(),e("q-input",{attrs:{autogrow:"",label:"Deskripsi Toko"},model:{value:t.form.description,callback:function(o){t.$set(t.form,"description",o)},expression:"form.description"}}),e("div",{staticClass:"q-my-md"},[e("div",{staticClass:"text-grey-8 q-mb-sm",attrs:{for:""}},[t._v("Alamat Toko")]),e("q-editor",{attrs:{toolbar:[["bold","italic","underline"]]},model:{value:t.form.address,callback:function(o){t.$set(t.form,"address",o)},expression:"form.address"}})],1)],1),e("div",[e("input",{ref:"image",staticClass:"hidden",attrs:{type:"file"},on:{change:t.updateImagePreview}}),e("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Logo",size:"sm",color:"primary",icon:"eva-upload",type:"button"},on:{click:function(o){return o.preventDefault(),t.handleBtnUpload(o)}}}),t.errors.logo?e("div",{staticClass:"text-xs text-red q-my-md"},[t._v(" "+t._s(t.errors.logo[0]))]):t._e()],1),t.imagePreview?e("q-list",[e("q-item",[e("q-item-section",{attrs:{top:""}},[e("img",{staticClass:"shadow-4 q-pa-xs bg-grey",staticStyle:{width:"100px",height:"100px","object-fit":"contain"},attrs:{src:t.imagePreview}})]),e("q-space"),e("q-item-section",{attrs:{side:""}},[e("div",{staticClass:"text-grey-8 q-gutter-xs"},[e("q-btn",{attrs:{size:"sm",round:"",icon:"eva-trash-2",glossy:"",color:"red"},on:{click:t.removeLogo}})],1)])],1)],1):t._e()],1),e("q-footer",{staticClass:"q-pa-sm bg-white"},[e("q-btn",{staticClass:"full-width",attrs:{loading:t.isLoading,label:"Simpan Data",color:"primary"},on:{click:t.save}},[e("q-tooltip",{staticClass:"bg-accent"},[t._v("Simpan Data")])],1)],1)],1)},s=[],i=(e("b0c0"),e("a4d3"),e("e01a"),e("758b")),r={data:function(){return{provinceOptions:[],subdistrictOptions:[],cityOptions:[],toko:null,isLoading:!1,form:{name:"",phone:"",address:"",description:"",slogan:"",logo:"",is_remove_logo:!1},imagePreview:""}},computed:{config:function(){return this.$store.state.config},dataToko:function(){return this.$store.state.shop},errors:function(){return this.$store.state.errors}},methods:{save:function(){var t=this;this.isLoading=!0;var o=this,e=new FormData;for(var a in this.form)this.form[a]&&null!=this.form[a]&&"null"!=this.form[a]&&e.append(a,this.form[a]);Object(i["a"])().post("shop",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){o.isLoading=!1,200==e.status&&(o.$store.commit("SET_SHOP",e.data.results),t.$q.notify({type:"positive",message:"Berhasil menyimpan data"}),o.$router.push({name:"Settings"}))})).catch((function(e){o.isLoading=!1,t.$q.notify({type:"negative",message:"Gagal menyimpan data, Coba refresh halaman"})}))},handleBtnUpload:function(){this.$refs.image.click()},updateImagePreview:function(){var t=this;this.form.logo=this.$refs.image.files[0];var o=new FileReader;o.onload=function(o){t.imagePreview=o.target.result},o.readAsDataURL(this.$refs.image.files[0])},removeLogo:function(){this.toko.logo_path&&(this.form.is_remove_logo=!0),this.form.logo="",this.imagePreview=""},setDataToko:function(){this.form.name=this.toko.name?this.toko.name:"",this.form.phone=this.toko.phone?this.toko.phone:"",this.form.slogan=this.toko.slogan?this.toko.slogan:"",this.form.address=this.toko.address?this.toko.address:"",this.form.description=this.toko.description?this.toko.description:"",this.imagePreview=this.toko.logo?this.toko.logo:""}},mounted:function(){if(this.dataToko)this.toko=this.dataToko,this.setDataToko();else{var t=this;Object(i["a"])().get("shop").then((function(o){200==o.status&&(t.toko=o.data.results,t.setDataToko(),t.$store.commit("SET_SHOP",o.data.results))}))}}},n=r,l=e("2877"),c=e("9989"),m=e("e359"),d=e("65c6"),p=e("9c40"),h=e("6ac5"),f=e("27f9"),u=e("d66b"),g=e("1c1c"),v=e("66e5"),b=e("4074"),k=e("2c91"),q=e("7ff0"),w=e("05c0"),y=e("eebe"),x=e.n(y),_=Object(l["a"])(n,a,s,!1,null,null,null);o["default"]=_.exports;x()(_,"components",{QPage:c["a"],QHeader:m["a"],QToolbar:d["a"],QBtn:p["a"],QToolbarTitle:h["a"],QInput:f["a"],QEditor:u["a"],QList:g["a"],QItem:v["a"],QItemSection:b["a"],QSpace:k["a"],QFooter:q["a"],QTooltip:w["a"]})}}]);