(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{ea7c:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("q-page",{attrs:{padding:""}},[t("q-header",[t("q-toolbar",[t("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),t("q-toolbar-title",[e._v("\n       Edit Post\n      ")])],1)],1),t("q-form",{on:{submit:function(t){return t.preventDefault(),e.submitPost.apply(null,arguments)}}},[t("q-input",{attrs:{label:"Title",rules:[function(e){return e&&e.length>0||"Required"}]},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),t("q-input",{attrs:{label:"Kategori"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}}),t("div",{staticClass:"row justify-between items-center q-py-sm q-my-xs border-b"},[t("div",[e._v("Tampil di Beranda")]),t("div",[t("q-toggle",{attrs:{label:e.form.is_promote?"YES":"NO","left-label":""},model:{value:e.form.is_promote,callback:function(t){e.$set(e.form,"is_promote",t)},expression:"form.is_promote"}})],1)]),t("div",{staticClass:"row justify-between items-center q-py-sm q-my-xs border-b"},[t("div",[e._v("Tampil di Halaman")]),t("div",[t("q-toggle",{attrs:{label:e.form.is_listing?"YES":"NO","left-label":""},model:{value:e.form.is_listing,callback:function(t){e.$set(e.form,"is_listing",t)},expression:"form.is_listing"}})],1)]),t("div",{staticClass:"q-mt-md"},[t("div",{staticClass:"q-my-sm label-text"},[e._v("\n        Konten\n      ")]),t("q-editor",{model:{value:e.form.body,callback:function(t){e.$set(e.form,"body",t)},expression:"form.body"}})],1),t("q-footer",{staticClass:"bg-transparent q-pa-md"},[t("q-btn",{staticClass:"full-width",attrs:{label:"Update Data",type:"submit",color:"primary"}})],1)],1),t("div",{staticClass:"q-my-md flex justify-between"},[t("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Image",size:"sm",color:"pink",icon:"eva-upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewImage.apply(null,arguments)}}}),t("q-btn",{staticClass:"mt-2 mr-2",attrs:{label:"Upload Gallery",size:"sm",color:"blue",icon:"eva-upload",type:"button"},on:{click:function(t){return t.preventDefault(),e.selectNewGallery.apply(null,arguments)}}})],1),t("div",{staticStyle:{"min-height":"150px"}},[e.imagePreview?t("div",[t("div",{staticClass:"text-md"},[e._v("Image")]),t("q-list",[t("q-item",[t("q-item-section",[t("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:e.imagePreview}})]),t("q-space"),t("q-item-section",{attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"eva-trash-2"},on:{click:e.removeImage}})],1)],1)],1)],1):e._e(),e.galleries.length?t("div",{staticClass:"q-mt-lg"},[t("div",{staticClass:"text-md q-mb-sm"},[e._v("Gallery")]),t("q-list",e._l(e.galleries,(function(i,a){return t("q-item",{key:a},[t("q-item-section",[t("img",{staticClass:"shadow-4 q-pa-xs bg-white",staticStyle:{width:"100px",height:"70px","object-fit":"cover"},attrs:{src:i}})]),t("q-space"),t("q-item-section",{attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"red",glossy:"",round:"",icon:"eva-trash-2"},on:{click:function(t){return e.removeGallery(i,a)}}})],1)],1)})),1)],1):e._e()]),t("input",{ref:"image",staticClass:"hidden",attrs:{type:"file"},on:{change:e.updateImagePreview}}),t("input",{ref:"gallery",staticClass:"hidden",attrs:{multiple:"multiple",type:"file"},on:{change:e.updateGallery}}),t("q-inner-loading",{attrs:{showing:e.loading}},[t("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1)],1)},s=[],l=i("ded3"),o=i.n(l),r=(i("159b"),i("a434"),i("7db0"),i("d81d"),i("2f62")),n={name:"PostCreate",data:function(){return{post:null,loading:!1,form:{id:"",title:"",tags:"",body:"",image:"",del_image:!1,is_listing:!1,is_promote:!0,gallery:[],delete_gallery:[]},imagePreview:"",galleries:[]}},methods:o()(o()({},Object(r["b"])("post",["updatePost","getSinglePost"])),{},{submitPost:function(){this.updatePost(this.form)},updateImagePreview:function(){var e=this;if(this.form.image=this.$refs.image.files[0],this.form.image){var t=new FileReader;t.onload=function(t){e.imagePreview=t.target.result},t.readAsDataURL(this.$refs.image.files[0])}},updateGallery:function(){var e=this,t=this.$refs.gallery.files;t.forEach((function(t){var i=new FileReader;i.onload=function(i){e.form.gallery.push(t),e.galleries.push(i.target.result)},i.readAsDataURL(t)}))},selectNewImage:function(){this.$refs.image.value="",this.$refs.image.click()},selectNewGallery:function(){this.$refs.gallery.value="",this.$refs.gallery.click()},removeImage:function(){this.imagePreview="",this.form.image="",this.form.del_image=!0},removeGallery:function(e,t){this.galleries.splice(t,1);var i=this.post.galleries.find((function(t){return t.src==e}));console.log(e),console.log(i),console.log(this.form),void 0!=i&&this.form.delete_gallery.push(i.id)},getPostData:function(){var e=this;this.loading=!0,this.getSinglePost(this.$route.params.id).then((function(t){if(e.loading=!1,200==t.status){var i=t.data.results;e.post=i,e.form.id=i.id,e.form.title=i.title,e.form.tags=i.tags,e.form.is_promote=i.is_promote,e.form.is_listing=i.is_listing,e.form.body=i.body,e.imagePreview=i.image_url,i.galleries.length&&(e.galleries=i.galleries.map((function(e){return e.src})))}})).catch((function(){e.loading=!1}))}}),created:function(){this.getPostData()}},c=n,m=i("2877"),d=i("9989"),g=i("e359"),f=i("65c6"),u=i("9c40"),p=i("6ac5"),b=i("0378"),v=i("27f9"),h=i("9564"),y=i("d66b"),q=i("7ff0"),w=i("1c1c"),_=i("66e5"),k=i("4074"),x=i("2c91"),P=i("74f7"),C=i("e669"),Q=i("2eeb"),$=i("eebe"),I=i.n($),S=Object(m["a"])(c,a,s,!1,null,null,null);t["default"]=S.exports;I()(S,"components",{QPage:d["a"],QHeader:g["a"],QToolbar:f["a"],QBtn:u["a"],QToolbarTitle:p["a"],QForm:b["a"],QInput:v["a"],QToggle:h["a"],QEditor:y["a"],QFooter:q["a"],QList:w["a"],QItem:_["a"],QItemSection:k["a"],QSpace:x["a"],QInnerLoading:P["a"],QSpinnerFacebook:C["a"]}),I()(S,"directives",{GoBack:Q["a"]})}}]);