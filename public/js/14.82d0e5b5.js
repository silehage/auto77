(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"368c":function(e,t,s){"use strict";s.r(t);s("ac1f"),s("841c"),s("b0c0");var a=function(){var e=this,t=e._self._c;return t("q-page",[t("q-header",[t("q-toolbar",[t("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),t("q-toolbar-title",[e._v("\n       List User\n      ")]),t("q-btn",{attrs:{label:"Tambah User",icon:"add",outline:""},on:{click:e.handleAddCs}})],1)],1),t("div",{staticClass:"q-pa-md row justify-between items-center q-gutter-sm"},[t("div",{staticClass:"col"},[t("q-input",{attrs:{square:"",outlined:"",dense:"",debounce:"1000",placeholder:"Ketik nama, email atau nomor telpon user"},on:{input:e.findUser},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticClass:"col-auto",staticStyle:{width:"60px"}},[t("q-input",{attrs:{square:"",outlined:"",dense:"",label:"Show",type:"number",min:"4"},model:{value:e.take,callback:function(t){e.take=t},expression:"take"}})],1),t("div",{staticClass:"col-auto"},[t("q-btn",{attrs:{label:"reset",unelevated:"",color:"primary"},on:{click:e.reset}})],1)]),t("div",[t("q-list",{attrs:{separator:""}},[t("q-item",[t("q-item-section",{attrs:{side:""}},[e._v("#")]),t("q-item-section",[e._v("Info User")]),t("q-item-section",[e._v("Role")]),t("q-item-section",{attrs:{side:""}},[e._v("Aksi")])],1),e._l(e.users,(function(s,a){return t("q-item",{key:a},[t("q-item-section",{attrs:{side:"",top:""}},[e._v(e._s(a+1))]),t("q-item-section",{attrs:{top:""}},[t("div",[e._v(e._s(s.name))]),t("div",[e._v(e._s(s.email))]),t("div",[e._v(e._s(s.phone))])]),t("q-item-section",[e._v(e._s(s.role))]),t("q-item-section",{staticClass:"q-gutter-sm",attrs:{side:""}},[t("q-btn",{attrs:{size:"sm",color:"blue",round:"",unelevated:"",icon:"eva-edit"},on:{click:function(t){return e.handleEditUser(s)}}},[t("q-tooltip",[e._v("\n                Edit User\n              ")])],1),t("q-btn",{attrs:{size:"sm",color:"red-6",round:"",unelevated:"",icon:"eva-trash-2"},on:{click:function(t){return e.handleDeleteUser(s.id)}}},[t("q-tooltip",[e._v("\n                Hapus User\n              ")])],1)],1)],1)})),e.userNotAvailable?t("q-item",[t("q-item-section",{staticClass:"text-center q-py-md"},[e._v("\n            Tidak ada data\n          ")])],1):e._e()],2),t("div",{staticClass:"q-py-md flex justify-center"},[e.canLoad?t("q-btn",{attrs:{loading:e.load,label:"Loadmore",color:"primary",outline:""},on:{click:e.loadUser}}):e._e()],1)],1),t("q-dialog",{model:{value:e.userModal,callback:function(t){e.userModal=t},expression:"userModal"}},[t("q-card",{staticClass:"card-lg"},[t("div",{staticClass:"card-heading"},[t("div",[e._v(e._s(e.formMode)+" User")]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"eva-close",round:"",padding:"xs",flat:""}})],1),t("q-card-section",[t("q-form",{staticClass:"q-gutter-y-sm",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("q-select",{staticClass:"q-mb-md",attrs:{options:e.roles,label:"Role"},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-award-outline"}})]},proxy:!0}]),model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),t("q-input",{attrs:{color:"grey-6",label:"Nama *",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Wajib diisi"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-person-outline"}})]},proxy:!0}]),model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("q-input",{attrs:{type:"email",color:"grey-6",label:"Email *",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type email"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-email-outline"}})]},proxy:!0}]),model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),t("q-input",{attrs:{color:"grey-6",label:"No Whatsapp *",dense:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Wajib diisi"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-phone-outline"}})]},proxy:!0}]),model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),t("q-input",{staticClass:"q-mb-md",attrs:{label:"Password *",color:"grey-6",type:e.isPwd?"password":"text",dense:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-lock-outline"}})]},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"eva-eye":"eva-eye-off-2"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t("q-input",{staticClass:"q-mb-md",attrs:{label:"Konfirmasi Password *",color:"grey-6",type:e.isPwd?"password":"text",dense:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"eva-lock-outline"}})]},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"eva-eye":"eva-eye-off-2"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}}),t("div",{staticClass:"column q-pt-md"},[t("q-btn",{attrs:{loading:e.loading,type:"submit",color:"primary",padding:"sm lg"}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)},n=[],o=s("448a"),i=s.n(o),r=(s("d3b7"),s("e6cf"),s("a79d"),s("5319"),s("2ca0"),s("99af"),s("758b")),l={name:"UserList",data:function(){return{users:[],take:10,canLoad:!1,search:"",userNotAvailable:!1,deleteId:null,load:!1,isPwd:!0,roles:["admin","cs","customer"],form:{user_id:"",name:"",phone:"",email:"",password:"",password_confirmation:"",device_name:"APP",role:"cs"},formMode:"Tambah",userModal:!1}},mounted:function(){this.users.length<this.take&&this.getUsers()},computed:{isDesktop:function(){return window.innerWidth>600},loading:function(){return this.$store.state.loading}},methods:{submit:function(){var e=this;if(this.checkInputPhone()){if(this.$store.commit("SET_LOADING",!0),"Tambah"==this.formMode){if(!this.form.password||!this.form.password_confirmation)return void this.$q.notify({type:"negative",message:"Password atau password konfirmasi wajib diisi"});this.$store.dispatch("user/addNewUser",this.form).then((function(){e.userModal=!1,e.getUsers()})).finally((function(){return e.$store.commit("SET_LOADING",!1)}))}"Edit"==this.formMode&&this.$store.dispatch("user/update",this.form).then((function(){e.userModal=!1,e.getUsers()})).finally((function(){return e.$store.commit("SET_LOADING",!1)}))}},handleEditUser:function(e){this.clearForm(),this.formMode="Edit",this.form.user_id=e.id,this.form.name=e.name,this.form.phone=e.phone,this.form.role=e.role,this.form.email=e.email,this.form.role=e.role,this.userModal=!0},checkInputPhone:function(){return this.form.phone=this.form.phone.replace(/\D/g,""),!!this.checkPhoneNumber(this.form.phone)||(this.$q.notify({message:"Silahkan masukkan nomor whatsapp yang benar.",type:"negative"}),this.form.phone="",!1)},checkPhoneNumber:function(e){if(e.length>9&&(e.startsWith("08")||e.startsWith("628")))return!0},getUsers:function(){var e=this;this.$q.loading.show(),Object(r["a"])().get("userList?take=".concat(this.take)).then((function(t){200==t.status&&(e.users=t.data.results,e.canLoad=t.data.results.length==e.take,e.userNotAvailable=!e.users.length)})).finally((function(){e.$q.loading.hide()}))},loadUser:function(){var e=this;this.load=!0,Object(r["a"])().get("userList?take=".concat(this.take,"&skip=").concat(this.users.length)).then((function(t){200==t.status&&(e.users=[].concat(i()(e.users),i()(t.data.results)),e.canLoad=t.data.results.length==e.take,e.userNotAvailable=!e.users.length)})).finally((function(){e.load=!1}))},findUser:function(){var e=this;this.search&&Object(r["a"])().get("findUser/"+this.search).then((function(t){200==t.status&&(e.users=t.data.results,e.userNotAvailable=!e.users.length)}))},reset:function(){this.users=[],this.search="",this.getUsers()},handleAddCs:function(){this.formMode="Tambah",this.clearForm(),this.userModal=!0},clearForm:function(){this.form.name="",this.form.phone="",this.form.email="",this.form.password="",this.form.password_confirmation=""},handleDeleteUser:function(e){var t=this;1!=e?this.$q.dialog({title:"Yakin akan menghapus user?",message:"Data yang di hapus tidak dapat dikembalikan",cancel:!0}).onOk((function(){t.deleteUser(e)})):this.$q.notify({type:"negative",message:"User admin tidak bisa di hapus"})},handleDisableVendor:function(e){var t=this;this.$q.dialog({title:"Yakin akan NON aktifkan toko?",cancel:!0}).onOk((function(){t.disableVendor(e)}))},handleEnableVendor:function(e){var t=this;this.$q.dialog({title:"Yakin akan mengaktifkan toko?",cancel:!0}).onOk((function(){t.enableVendor(e)}))},disableVendor:function(e){var t=this;Object(r["a"])().post("setVendorStatus",{id:e,status:"disable"}).then((function(e){200==e.status&&t.reset()}))},enableVendor:function(e){var t=this;Object(r["a"])().post("setVendorStatus",{id:e,status:"enable"}).then((function(e){200==e.status&&t.reset()}))},deleteUser:function(e){var t=this;this.$q.loading.show(),Object(r["a"])().delete("user/"+e).then((function(e){200==e.status&&t.reset()})).finally((function(){t.$q.loading.hide()}))}}},c=l,d=s("2877"),u=s("9989"),m=s("e359"),f=s("65c6"),h=s("9c40"),p=s("6ac5"),b=s("27f9"),v=s("1c1c"),k=s("66e5"),q=s("4074"),g=s("05c0"),y=s("24e8"),w=s("f09f"),_=s("a370"),U=s("0378"),x=s("ddd8"),$=s("0016"),C=s("2eeb"),P=s("7f67"),S=s("eebe"),N=s.n(S),Q=Object(d["a"])(c,a,n,!1,null,null,null);t["default"]=Q.exports;N()(Q,"components",{QPage:u["a"],QHeader:m["a"],QToolbar:f["a"],QBtn:h["a"],QToolbarTitle:p["a"],QInput:b["a"],QList:v["a"],QItem:k["a"],QItemSection:q["a"],QTooltip:g["a"],QDialog:y["a"],QCard:w["a"],QCardSection:_["a"],QForm:U["a"],QSelect:x["a"],QIcon:$["a"]}),N()(Q,"directives",{GoBack:C["a"],ClosePopup:P["a"]})}}]);